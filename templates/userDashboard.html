<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Orders - User Dashboard</title>
    <style>
        body {
            font-family: sans-serif;
            background: #1a0e2c; 
            color: white;
            padding: 20px;
        }
        h1, h2 { text-align: center; color: #e0d4f7; }
        .container { max-width: 1000px; margin: auto; }
        .btn-back {
            display: inline-block;
            background: #4a2b7a;
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .table-wrapper {
            background-color: white;
            padding: 10px;
            border-radius: 8px;
            color: black;
        }
        table { width: 100%; border-collapse: collapse; background-color: white; }
        thead { background-color: #2c1952; color: white; }
        th { padding: 15px; text-align: left; }
        tr { background-color: white; border-bottom: 1px solid #ccc; }
        td { padding: 15px; color: black; font-size: 16px; }
        .empty-data { color: red; font-size: 0.8em; font-style: italic; }
        .status-pending { color: orange; font-weight: bold; }
        .status-accepted { color: green; font-weight: bold; }
        .status-rejected { color: red; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <a href="{{ url_for('home') }}" class="btn-back">&#8592; Back to Home</a>
    <h2>My Orders</h2>

{% if orders %}
<div class="table-wrapper">
    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>Vendor</th>
                <th>Order Details</th>
                <th>Status</th>
                <th>Bill</th>
            </tr>
        </thead>
        <tbody>
            {% for order in orders %}
            <tr>
                <td><strong>{{ order['date']|default('No Date') }}</strong></td>
                <td>
                    {% set vendor = vendors_dict.get(order['chosenVendorId'], {}) %}
                    {{ vendor.get('full_name', 'Vendor Unknown') }}
                </td>
                <td>{{ order.get('description', '<span class="empty-data">No Description</span>')|safe }}</td>
                <td>
                    {% if order.get('state') %}
                        <span class="status-{{ order['state'] }}">{{ order['state']|capitalize ~ "ed"}}</span>
                    {% else %}
                        <span class="status-pending">Pending</span>
                    {% endif %}
                </td>
                <td>RS. {{ order.get('bill', '0') }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
    <div style="text-align: center; border: 2px dashed white; padding: 20px;">
        <h3>You have no orders yet.</h3>
    </div>
{% endif %}


</div>

</body>
</html>
